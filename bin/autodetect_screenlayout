#!/bin/sh

case "$1" in
    left) direction='--left-of';;
    right) direction='--right-of';;
    down|below) direction='--below';;
    *) direction='--above';;
esac
case "$2" in
    left|right) extra_args="--rotate $2";;
    *) extra_args="";;
esac

xrandr | grep -q 'HDMI-1 connected'
hdmi_connected=$?

xrandr | grep -q 'HDMI-2 connected'
displayport_connected=$?

if xrandr | grep -q 'LVDS-1 connected'; then
    MAINSCREEN="LVDS-1"
else
    MAINSCREEN="eDP-1"
fi

if [ $displayport_connected == 0 ]; then
    if [ $hdmi_connected == 0 ]; then
        echo not implemented yet
    else
        xrandr --output HDMI-2 --auto "$direction" "$MAINSCREEN" $extra_args --output "$MAINSCREEN" --auto --pos 0x0
        echo activating displayport
    fi
elif [ $hdmi_connected == 0 ]; then
    xrandr --output HDMI-1 --auto "$direction" "$MAINSCREEN" $extra_args --output "$MAINSCREEN" --auto --pos 0x0
    echo activating hdmi
else
    xrandr --output HDMI-1 --off --output HDMI-2 --off --output "$MAINSCREEN" --auto --pos 0x0
    echo deactivating external screens
fi

sh ~/.fehbg
